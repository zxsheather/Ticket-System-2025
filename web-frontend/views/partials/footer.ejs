<!-- 页脚组件 -->
<footer class="bg-dark text-light mt-5 py-4">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <h5><i class="fas fa-train"></i> 火车票管理系统</h5>
        <p class="text-muted">
          提供便捷的火车票查询、购买和管理服务
        </p>
      </div>
      <div class="col-md-3">
        <h6>快速链接</h6>
        <ul class="list-unstyled">
          <li><a href="/" class="text-light text-decoration-none">首页</a></li>
          <% if (user) { %>
            <li><a href="/orders" class="text-light text-decoration-none">我的订单</a></li>
            <li><a href="/profile" class="text-light text-decoration-none">个人资料</a></li>
          <% } else { %>
            <li><a href="/login" class="text-light text-decoration-none">用户登录</a></li>
            <li><a href="/register" class="text-light text-decoration-none">用户注册</a></li>
          <% } %>
        </ul>
      </div>
      <div class="col-md-3">
        <h6>系统信息</h6>
        <ul class="list-unstyled text-muted">
          <li><small>版本: 2025.1.0</small></li>
          <li><small>在线用户: <span id="onlineUsers">-</span></small></li>
          <li><small>系统状态: <span id="systemStatus" class="text-success">正常</span></small></li>
        </ul>
      </div>
    </div>
    <hr class="my-3">
    <div class="row">
      <div class="col-md-6">
        <small class="text-muted">© 2025 火车票管理系统. 保留所有权利.</small>
      </div>
      <div class="col-md-6 text-end">
        <small class="text-muted">
          系统时间: <span id="currentTime"></span>
        </small>
      </div>
    </div>
  </div>
</footer>

<script>
// 更新系统时间
function updateTime() {
  const now = new Date();
  const timeStr = now.toLocaleString('zh-CN', {
    year: 'numeric',
    month: '2-digit',
    day: '2-digit',
    hour: '2-digit',
    minute: '2-digit',
    second: '2-digit'
  });
  const timeElement = document.getElementById('currentTime');
  if (timeElement) {
    timeElement.textContent = timeStr;
  }
}

// 每秒更新时间
updateTime();
setInterval(updateTime, 1000);

// WebSocket连接状态监控
<% if (user) { %>
if (window.socket) {
  const statusElement = document.getElementById('systemStatus');
  
  socket.on('connect', () => {
    if (statusElement) {
      statusElement.textContent = '正常';
      statusElement.className = 'text-success';
    }
  });
  
  socket.on('disconnect', () => {
    if (statusElement) {
      statusElement.textContent = '连接断开';
      statusElement.className = 'text-danger';
    }
  });
  
  socket.on('online_users', (count) => {
    const onlineElement = document.getElementById('onlineUsers');
    if (onlineElement) {
      onlineElement.textContent = count;
    }
  });
}
<% } %>
</script>
